{
  "format_version": "0.1",
  "terraform_version": "0.13.0",
  "planned_values": {
    "root_module": {
      "resources": [
        {
          "address": "data.aws_vpc.default",
          "mode": "data",
          "type": "aws_vpc",
          "name": "default",
          "provider_name": "registry.terraform.io/hashicorp/aws",
          "schema_version": 0,
          "values": {
            "id": "vpc-3e89b244",
            "default": true,
            "cidr_block": "172.31.0.0/16",
            "tags": {}
          }
        },
        {
          "address": "data.aws_subnet_ids.all",
          "mode": "data",
          "type": "aws_subnet_ids",
          "name": "all",
          "provider_name": "registry.terraform.io/hashicorp/aws",
          "schema_version": 0,
          "values": {
            "id": "vpc-3e89b244",
            "ids": ["subnet-52d9320d"],
            "vpc_id": "vpc-3e89b244",
            "tags": null
          }
        }
      ],
      "child_modules": [
        {
          "address": "module.web_app[\"us-east-1a\"]",
          "resources": [
            {
              "address": "module.web_app[\"us-east-1a\"].aws_instance.web_app",
              "mode": "managed",
              "type": "aws_instance",
              "name": "web_app",
              "provider_name": "registry.terraform.io/hashicorp/aws",
              "schema_version": 1,
              "values": {
                "ami": "ami-000b3a073fc20e415",
                "availability_zone": "us-east-1a",
                "instance_type": "t3.micro",
                "monitoring": null,
                "tags": null,
                "root_block_device": [
                  {
                    "delete_on_termination": true,
                    "volume_size": 100
                  }
                ],
                "ebs_block_device": [
                  {
                    "delete_on_termination": true,
                    "device_name": "xvdf",
                    "volume_size": 150
                  }
                ]
              }
            }
          ]
        },
        {
          "address": "module.storage[0]",
          "resources": [
            {
              "address": "module.storage[0].aws_ebs_volume.standard",
              "mode": "managed",
              "type": "aws_ebs_volume",
              "name": "standard",
              "provider_name": "registry.terraform.io/hashicorp/aws",
              "schema_version": 0,
              "values": {
                "availability_zone": "us-east-1a",
                "size": 120,
                "type": "standard",
                "tags": null
              }
            },
            {
              "address": "module.storage[0].aws_ebs_volume.io1",
              "mode": "managed",
              "type": "aws_ebs_volume",
              "name": "io1",
              "provider_name": "registry.terraform.io/hashicorp/aws",
              "schema_version": 0,
              "values": {
                "availability_zone": "us-east-1a",
                "iops": 0,
                "size": 80,
                "type": "io1",
                "tags": null
              }
            },
            {
              "address": "module.storage[0].aws_ebs_snapshot.standard",
              "mode": "managed",
              "type": "aws_ebs_snapshot",
              "name": "standard",
              "provider_name": "registry.terraform.io/hashicorp/aws",
              "schema_version": 0,
              "values": {
                "description": null,
                "tags": null,
                "timeouts": null
              }
            }
          ]
        },
        {
          "address": "module.net",
          "resources": [
            {
              "address": "module.net.aws_nat_gateway.this",
              "mode": "managed",
              "type": "aws_nat_gateway",
              "name": "this",
              "provider_name": "registry.terraform.io/hashicorp/aws",
              "schema_version": 0,
              "values": {
                "allocation_id": "eipalloc-12345678",
                "subnet_id": "subnet-52d9320d",
                "tags": null
              }
            }
          ]
        }
      ]
    }
  },
  "resource_changes": [
    {
      "address": "module.web_app[\"us-east-1a\"].aws_instance.web_app",
      "module_address": "module.web_app[\"us-east-1a\"]",
      "mode": "managed",
      "type": "aws_instance",
      "name": "web_app",
      "provider_name": "registry.terraform.io/hashicorp/aws",
      "change": {
        "actions": ["create"],
        "before": null,
        "after": {
          "ami": "ami-000b3a073fc20e415",
          "availability_zone": "us-east-1a",
          "instance_type": "t3.micro",
          "root_block_device": [
            {
              "delete_on_termination": true,
              "volume_size": 100
            }
          ],
          "ebs_block_device": [
            {
              "delete_on_termination": true,
              "device_name": "xvdf",
              "volume_size": 150
            }
          ],
          "tags": null
        },
        "after_unknown": {
          "id": true,
          "root_block_device": [
            {
              "encrypted": true,
              "iops": true,
              "kms_key_id": true,
              "volume_id": true,
              "volume_type": true
            }
          ],
          "ebs_block_device": [
            {
              "encrypted": true,
              "iops": true,
              "kms_key_id": true,
              "snapshot_id": true,
              "volume_id": true,
              "volume_type": true
            }
          ]
        }
      }
    },
    {
      "address": "module.storage[0].aws_ebs_volume.standard",
      "module_address": "module.storage[0]",
      "mode": "managed",
      "type": "aws_ebs_volume",
      "name": "standard",
      "provider_name": "registry.terraform.io/hashicorp/aws",
      "change": {
        "actions": ["create"],
        "before": null,
        "after": {
          "availability_zone": "us-east-1a",
          "size": 120,
          "type": "standard",
          "tags": null
        },
        "after_unknown": {
          "id": true,
          "arn": true,
          "encrypted": true,
          "iops": true,
          "kms_key_id": true,
          "snapshot_id": true
        }
      }
    },
    {
      "address": "module.storage[0].aws_ebs_volume.io1",
      "module_address": "module.storage[0]",
      "mode": "managed",
      "type": "aws_ebs_volume",
      "name": "io1",
      "provider_name": "registry.terraform.io/hashicorp/aws",
      "change": {
        "actions": ["create"],
        "before": null,
        "after": {
          "availability_zone": "us-east-1a",
          "iops": 0,
          "size": 80,
          "type": "io1",
          "tags": null
        },
        "after_unknown": {
          "id": true,
          "arn": true,
          "encrypted": true,
          "kms_key_id": true,
          "snapshot_id": true
        }
      }
    },
    {
      "address": "module.storage[0].aws_ebs_snapshot.standard",
      "module_address": "module.storage[0]",
      "mode": "managed",
      "type": "aws_ebs_snapshot",
      "name": "standard",
      "provider_name": "registry.terraform.io/hashicorp/aws",
      "change": {
        "actions": ["create"],
        "before": null,
        "after": {
          "description": null,
          "tags": null,
          "timeouts": null
        },
        "after_unknown": {
          "id": true,
          "arn": true,
          "encrypted": true,
          "kms_key_id": true,
          "owner_id": true,
          "volume_id": true,
          "volume_size": true
        }
      }
    },
    {
      "address": "module.net.aws_nat_gateway.this",
      "module_address": "module.net",
      "mode": "managed",
      "type": "aws_nat_gateway",
      "name": "this",
      "provider_name": "registry.terraform.io/hashicorp/aws",
      "change": {
        "actions": ["create"],
        "before": null,
        "after": {
          "allocation_id": "eipalloc-12345678",
          "subnet_id": "subnet-52d9320d",
          "tags": null
        },
        "after_unknown": {
          "id": true,
          "nat_gateway_addresses": true,
          "private_ip": true,
          "public_ip": true
        }
      }
    }
  ],
  "configuration": {
    "provider_config": {
      "aws": { "name": "aws" }
    },
    "root_module": {
      "resources": [
        {
          "address": "data.aws_vpc.default",
          "mode": "data",
          "type": "aws_vpc",
          "name": "default",
          "provider_config_key": "aws",
          "schema_version": 0
        },
        {
          "address": "data.aws_subnet_ids.all",
          "mode": "data",
          "type": "aws_subnet_ids",
          "name": "all",
          "provider_config_key": "aws",
          "schema_version": 0
        }
      ],
      "module_calls": {
        "web_app": {
          "source": "./web_app",
          "for_each_expression": { "constant_value": { "us-east-1a": "us-east-1a" } },
          "module": {
            "resources": [
              {
                "address": "aws_instance.web_app",
                "mode": "managed",
                "type": "aws_instance",
                "name": "web_app",
                "provider_config_key": "web_app:aws",
                "schema_version": 1
              }
            ]
          }
        },
        "storage": {
          "source": "./storage",
          "count_expression": { "constant_value": 1 },
          "module": {
            "resources": [
              { "address": "aws_ebs_volume.standard", "mode": "managed", "type": "aws_ebs_volume", "name": "standard", "provider_config_key": "storage:aws", "schema_version": 0 },
              { "address": "aws_ebs_volume.io1", "mode": "managed", "type": "aws_ebs_volume", "name": "io1", "provider_config_key": "storage:aws", "schema_version": 0 },
              { "address": "aws_ebs_snapshot.standard", "mode": "managed", "type": "aws_ebs_snapshot", "name": "standard", "provider_config_key": "storage:aws", "schema_version": 0 }
            ]
          }
        },
        "net": {
          "source": "./net",
          "module": {
            "resources": [
              { "address": "aws_nat_gateway.this", "mode": "managed", "type": "aws_nat_gateway", "name": "this", "provider_config_key": "net:aws", "schema_version": 0 }
            ]
          }
        }
      }
    }
  }
}
